(function(){var a;a=angular.module("Restify",[]),a.factory("Restify",["$http","$q",function(a,b){var c,d,e,f,g;return g=function(a){return _.filter(a.split("/"),function(a){return a})},e=function(a){return _.omit(a,function(a,b){return/^\$/.test(b)||a&&"Resource"===a.constructor.name})},f=function(a,b){var c,d,e;d=angular.copy(a);for(c in b)e=b[c],d[c]=_.isUndefined(d[c])?e:angular.extend(d[c],e);return d},d=function(a,c){var d;return d=b.defer(),a.success(function(a){return a=c(a),d.resolve(a)}),a.error(function(a){return d.reject(a)}),d.promise},c=function(){function b(a,c,d){var e,f,g;this.$$url=a,this.$$route=c,this.$$parent=d,this.$$config={};for(f in c)g=c[f],/^:/.test(f)?(e=f.match(/^:(.+)/)[1],this["$"+e]=function(c){return new b(""+a+"/"+c,g,this)}):this[f]=new b(""+a+"/"+f,g,this)}return b.prototype.$get=function(c){var e,f,g=this;return null==c&&(c={}),e={},f=_.isUndefined(c.restified)?!0:c.restified,_.isUndefined(c.params)||(e.params=c.params),d(a.get(""+this.$$url,e),function(a){var c,d,e,h,i,j;if(null!=a._embedded&&(a=a._embedded),!f)return a;if(_.isArray(a)){c="id",d=g.$$route,j=g.$$route;for(h in j)if(i=j[h],/^:/.test(h)){c=h.match(/^:(.+)/)[1],d=i;break}return a=_.map(a,function(a){var e,f;return f=null!=a[c]?"/"+a[c]:"",e=new b(""+g.$$url+f,d,g),_.extend(e,a)}),_.extend(g,a)}return e=new b(g.$$url,g.$$route,g),_.extend(e,a)})},b.prototype.$delete=function(){var b;return b={url:""+this.$$url,method:"DELETE"},d(a(b))},b.prototype.$post=function(b){var c;return c={url:""+this.$$url,data:e(b||this),method:"PATCH"},d(a(c))},b.prototype.$put=function(b){var c;return c={url:""+this.$$url,data:e(b||this),method:"PUT"},d(a(c))},b.prototype.$patch=function(b){var c;return c={url:""+this.$$url,data:e(b||this),method:"PATCH"},d(a(c))},b.prototype.$config=function(a){return this.$$config=f(this.$$config,a),this},b}(),function(a,b){var d,e;return a="/"+g(a).join("/"),d={},e={add:function(a){var b;return a=g(a),b=function(a,c){var d,e;return _.isEmpty(c)?void 0:(d=c[0],e=c.slice(1),a[d]=a[d]||{},b(a[d],e))},b(d,a,[])}},b(e),new c(a,d,null)}}])}).call(this);