(function(){var a;a=angular.module("Restify",[]),a.factory("Restify",["$http","$q",function(a,b){var c,d,e,f;return f=function(a){return _.filter(a.split("/"),function(a){return a})},e=function(a){return _.omit(a,function(a,b){return/^\$/.test(b)||a&&"Resource"===a.constructor.name})},d=function(a,c){var d;return d=b.defer(),a.success(function(a){return a=c(a),d.resolve(a)}),a.error(function(a){return d.reject(a)}),d.promise},c=function(){function b(a,c){var d,e,f;this.$$url=a,this.$$route=c;for(e in c)f=c[e],/^:/.test(e)?(d=e.match(/^:(.+)/)[1],this["$"+d]=function(c){return new b(""+a+"/"+c,f)}):this[e]=new b(""+a+"/"+e,f)}return b.prototype.$get=function(c){var e=this;return null==c&&(c=!0),d(a.get(""+this.$$url),function(a){var d,f,g,h,i,j;if(null!=a._embedded&&(a=a._embedded),!c)return a;if(_.isArray(a)){d="id",f=e.$$route,j=e.$$route;for(h in j)if(i=j[h],/^:/.test(h)){d=h.match(/^:(.+)/)[1],f=i;break}return a=_.map(a,function(a){var c,g;return g=null!=a[d]?"/"+a[d]:"",c=new b(""+e.$$url+g,f),_.extend(c,a)}),_.extend(e,a)}return g=new b(e.$$url,e.$$route),_.extend(g,a)})},b.prototype.$trash=function(){var b=this;return d(a["delete"](""+this.$$url),function(a){return b.response=a,b})},b.prototype.$post=function(b){var c=this;return d(a.post(""+this.$$url,e(b)),function(a){return c.response=a,c})},b.prototype.$save=function(b){var c=this;return d(a.put(""+this.$$url,e(b||this)),function(a){return c.response=a,c})},b}(),function(a,b){var d,e;return a="/"+f(a).join("/"),d={},e={add:function(a){var b;return a=f(a),b=function(a,c){var d,e;return _.isEmpty(c)?void 0:(d=c[0],e=c.slice(1),a[d]=a[d]||{},b(a[d],e))},b(d,a,[])}},b(e),new c(a,d)}}])}).call(this);