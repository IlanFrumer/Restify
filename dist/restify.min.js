/*
 * Restify v0.2.6
 * (c) 2013 Ilan Frumer
 * License: MIT
*/
(function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=angular.module("restify",[]),b={},a.config(["$httpProvider",function(a){return b.transformRequest=a.defaults.transformRequest[0],b.transformResponse=a.defaults.transformResponse[0]}]),a.factory("restify",["$http","$q",function(a,c){var e,f,g,h,i;return i=function(a){return _.filter(a.split("/"),function(a){return a})},h=function(a){return _.omit(a,function(a,b){return/^\$/.test(b)||a&&a instanceof e})},g=function(a,d){var e,f,g,i,j;for(e={},e.url=this.$$url,e.method=a,angular.isUndefined(d)||(e.data=angular.toJson(h(d))),i=[],j=this;j;)i.push(j),j=j.$$parent;return f=_.find(i,"$$requestInterceptor"),g=_.find(i,"$$responseInterceptor"),e.transformRequest=function(a){return a=b.transformRequest(a),angular.isUndefined(f)||(a=f.$$requestInterceptor(a)),a||c.when(a)},e.transformResponse=function(a,d){return a=b.transformResponse(a,d),angular.isUndefined(g)||(a=g.$$responseInterceptor(a,d)),a||c.when(a)},e.headers=_.reduceRight(i,function(a,b){return _.defaults(a,b.$$headers||{})},{}),e},f=function(a,b){var d;return d=c.defer(),a.success(function(a){return angular.isUndefined(b)||(a=b(a)),d.resolve(a)}),a.error(function(a){return d.reject(a)}),d.promise},e=function(b){function c(a,b,d){var e,f,g;this.$$url=a,this.$$route=b,this.$$parent=d;for(f in b)g=b[f],"/"===a&&(a=""),/^:/.test(f)?(e=f.match(/^:(.+)/)[1],this["$"+e]=function(b){return new c(""+a+"/"+b,g,this)}):this[f]=new c(""+a+"/"+f,g,this)}return d(c,b),c.prototype.$uget=function(a){return null==a&&(a={}),this.$get(a,!1)},c.prototype.$get=function(b,d){var e,h=this;return null==b&&(b={}),null==d&&(d=!0),e=g.call(this,"GET"),_.isEmpty(b)||(e.params=b),f(a(e),function(a){var b,e,f,g,i,j;if(!d)return a;if(g=new c(h.$$url,h.$$route,h.$$parent),_.isArray(a)){b=void 0,e=h.$$route,j=h.$$route;for(f in j)if(i=j[f],/^:/.test(f)){b=f.match(/^:(.+)/)[1],e=i;break}angular.isUndefined(b)||(a=_.map(a,function(a){return angular.isUndefined(a[b])?a:_.extend(new c(""+g.$$url+"/"+a[b],e,g),a)})),g.push.apply(g,a)}else g=_.extend(g,a);return g})},c.prototype.$delete=function(){var b;return b=g.call(this,"DELETE"),f(a(b))},c.prototype.$post=function(b){var c;return c=g.call(this,"POST",b||this),f(a(c))},c.prototype.$put=function(b){var c;return c=g.call(this,"PUT",b||this),f(a(c))},c.prototype.$patch=function(b){var c;return c=g.call(this,"PATCH",b||this),f(a(c))},c.prototype.$setHeaders=function(a){var b,c;angular.isUndefined(this.$$headers)&&(this.$$headers={});for(b in a)c=a[b],this.$$headers[b.toUpperCase()]=c;return this},c.prototype.$setResponseInterceptor=function(a){return this.$$responseInterceptor=a,this},c.prototype.$setRequestInterceptor=function(a){return this.$$requestInterceptor=a,this},c}(Array),function(a,b){var c,d;return a="/"+i(a).join("/"),c={},d={add:function(a){var b;return a=i(a),b=function(a,c){var d,e;return _.isEmpty(c)?void 0:(d=c[0],e=c.slice(1),a[d]=a[d]||{},b(a[d],e))},b(c,a,[])}},b(d),new e(a,c,void 0)}}])}).call(this);