/*
 * Restify v0.2.6
 * (c) 2013 Ilan Frumer
 * License: MIT
*/
(function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=angular.module("restify",[]),b={},a.config(["$httpProvider",function(a){return b.transformRequest=a.defaults.transformRequest[0],b.transformResponse=a.defaults.transformResponse[0]}]),a.factory("restify",["$window","$http","$q",function(a,b){var c,e,f,g,h;return g=a.toString,a.toString=function(){return this instanceof c?"[object Array]":g.call(this)},h=function(a){return _.filter(a.split("/"),function(a){return a})},f=function(a){var b,d,e,f,g,h;if(f=new c(this.$$url,this.$$route,this.$$parent),_.isArray(a)){b=void 0,d=this.$$route,h=this.$$route;for(e in h)if(g=h[e],/^:/.test(e)){b=e.match(/^:(.+)/)[1],d=g;break}angular.isDefined(b)&&(a=_.map(a,function(a){return angular.isUndefined(a[b])?a:_.extend(new c(""+f.$$url+"/"+a[b],d,f),a)})),f.push.apply(f,a)}else f=_.extend(f,a);return f},e=function(a){return angular.isObject(a)?_.omit(a,function(a,b){return/^\$/.test(b)}):void 0},c=function(a){function c(a,b,d){var e,f,g;this.$$url=a,this.$$route=b,this.$$parent=d,this.$$config={};for(f in b)g=b[f],"/"===a&&(a=""),/^:/.test(f)?(e=f.match(/^:(.+)/)[1],this["$"+e]=function(b){return new c(""+a+"/"+b,g,this)}):this["$"+f]=new c(""+a+"/"+f,g,this)}return d(c,a),c.prototype.$req=function(a,c){var d,g=this;return null==c&&(c=!0),d={},a.data&&(a.data=e(a.data)),a.url=this.$$url,angular.extend(d,this.$$config,a),d.method=d.method||"GET",_.isEmpty(d.params)&&delete d.params,b(d).then(function(a){return c&&(a.data=f.call(g,a.data)),a.data})},c.prototype.$ureq=function(a){return this.req(a,!1)},c.prototype.$uget=function(a){return null==a&&(a={}),this.$ureq({method:"GET",params:a})},c.prototype.$get=function(a){return null==a&&(a={}),this.$req({method:"GET",params:a})},c.prototype.$upost=function(a){return this.$ureq({method:"POST",data:a||this})},c.prototype.$post=function(a){return this.$req({method:"POST",data:a||this})},c.prototype.$uput=function(a){return this.$ureq({method:"PUT",data:a||this})},c.prototype.$put=function(a){return this.$req({method:"PUT",data:a||this})},c.prototype.$upatch=function(a){return this.$ureq({method:"PATCH",data:a||this})},c.prototype.$patch=function(a){return this.$req({method:"PATCH",data:a||this})},c.prototype.$udelete=function(){return this.$ureq({method:"DELETE"})},c.prototype.$delete=function(){return this.$req({method:"DELETE"})},c.prototype.$config=function(a){return angular.extend($$config,a)},c}(Array),function(a,b){var d,e,f;return f=a.match(/^(https?\:\/\/)?(.+)/)||[],a=(f[1]||"")+h(f[2]||"").join("/"),d={},e={add:function(a){var b;return a=h(a),(b=function(a,c){var d,e;return _.isEmpty(c)?void 0:(d=c[0],e=c.slice(1),a[d]=a[d]||{},b(a[d],e))})(d,a,[])}},b(e),new c(a,d,null)}}])}).call(this);