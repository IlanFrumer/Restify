/*
 * Restify v0.3.1
 * (c) 2013 Ilan Frumer
 * License: MIT
 */
(function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=angular.module("restify",[]),b={},a.config(["$httpProvider",function(a){return b.transformRequest=a.defaults.transformRequest[0],b.transformResponse=a.defaults.transformResponse[0]}]),a.factory("restify",["$http","$q",function(a){var b,c,e,f;return f=function(a){return _.filter(a.split("/"),function(a){return a})},e=function(a){var c,d,e,f,g,h;if(f=null,_.isObject(a)){c=null,d=this.$$route,h=this.$$route;for(e in h)if(g=h[e],/^:/.test(e)){c=e.match(/^:(.+)/)[1],d=g;break}_.isArray(a)?(f=new b(this.$$url,this.$$route,this.$$parent),c&&(a=_.map(a,function(a){return a[c]?_.extend(new b(""+f.$$url+"/"+a[c],d,f),a):a})),f.push.apply(f,a)):(f=c&&a[c]?new b(""+this.$$url+"/"+a[c],this.$$route,this):new b(this.$$url,this.$$route,this.$$parent),f=_.extend(f,a))}else f=new b(this.$$url,this.$$route,this.$$parent),f.data=a;return f},c=function(a){return angular.isObject(a)?_.omit(a,function(a,b){return/^\$/.test(b)}):void 0},b=function(b){function f(a,b,c){var d,e,g;this.$$url=a,this.$$route=b,this.$$parent=c,this.$$config={};for(e in b)g=b[e],"/"===a&&(a=""),/^:/.test(e)?(d=e.match(/^:(.+)/)[1],this["$"+d]=function(b){return new f(""+a+"/"+b,g,this)}):this["$"+e]=new f(""+a+"/"+e,g,this)}return d(f,b),f.prototype.$req=function(b,d){var f;return null==d&&(d=!0),f={},b.data&&(b.data=c(b.data)),b.url=this.$$url,angular.extend(f,this.$$config,b),f.method=f.method||"GET",_.isEmpty(f.params)&&delete f.params,a(f).then(function(a){return function(b){return d&&(b.data=e.call(a,b.data)),b.data}}(this))},f.prototype.$ureq=function(a){return this.$req(a,!1)},f.prototype.$uget=function(a){return null==a&&(a={}),this.$ureq({method:"GET",params:a})},f.prototype.$get=function(a){return null==a&&(a={}),this.$req({method:"GET",params:a})},f.prototype.$upost=function(a){return this.$ureq({method:"POST",data:a||this})},f.prototype.$post=function(a){return this.$req({method:"POST",data:a||this})},f.prototype.$uput=function(a){return this.$ureq({method:"PUT",data:a||this})},f.prototype.$put=function(a){return this.$req({method:"PUT",data:a||this})},f.prototype.$upatch=function(a){return this.$ureq({method:"PATCH",data:a||this})},f.prototype.$patch=function(a){return this.$req({method:"PATCH",data:a||this})},f.prototype.$udelete=function(){return this.$ureq({method:"DELETE"})},f.prototype.$delete=function(){return this.$req({method:"DELETE"})},f.prototype.$config=function(a){return angular.extend($$config,a)},f}(Array),function(a,c){var d,e,g;return g=a.match(/^(https?\:\/\/)?(.+)/)||[],a=(g[1]||"/")+f(g[2]||"").join("/"),d={},e={add:function(a){var b;return a=f(a),(b=function(a,c){var d,e;return _.isEmpty(c)?void 0:(d=c[0],e=c.slice(1),a[d]=a[d]||{},b(a[d],e))})(d,a,[])}},c(e),new b(a,d,null)}}])}).call(this);